---
# zabbix_inventory.yml
plugin: zabbix.zabbix.zabbix_inventory

#env ZABBIX_SERVERでInject
#server_url: "https://xxx.xxx.xxx.xxx"
#add_zabbix_groups: true

#env ZABBIX_USERNAMEでInject
#login_user: Admin

#env ZABBIX_PASSWORDでInject
#login_password: "xxxxxxxxx"

# host_zapi_query:
#   selectInterfaces: 'extend'
validate_certs: false

# groups:
#   enabled: zbx_status == "0"
#   disabled: zbx_status == "1"

# compose:
#   ansible_host: (zbx_interfaces | selectattr('type','==','1') | first).ip

cache: true
cache_plugin: jsonfile
cache_timeout: 7200
cache_connection: /tmp/zabbix_inventory
query:
  selectGroups: ['name']
  
keyed_groups:
  - key: zabbix_groups | map(attribute='name')
    separator: ""